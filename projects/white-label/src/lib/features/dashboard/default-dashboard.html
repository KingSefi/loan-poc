<h1>Dashboard</h1>
<p class="subtitle">Welcome back! Here's your financial overview.</p>

<section class="accounts-grid">
  @for (account of accounts(); track account.label) {
    <mat-card>
      <mat-card-header>
        <mat-icon mat-card-avatar>{{ account.icon }}</mat-icon>
        <mat-card-title>{{ account.balance | currency }}</mat-card-title>
        <mat-card-subtitle>{{ account.label }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <span
          class="trend"
          [class.positive]="!account.trend.startsWith('-')"
          [class.negative]="account.trend.startsWith('-')"
        >
          {{ account.trend }} this month
        </span>
      </mat-card-content>
    </mat-card>
  }
</section>

<div class="two-column">
  <mat-card class="transactions-card">
    <mat-card-header>
      <mat-card-title>Recent Transactions</mat-card-title>
      <mat-card-subtitle>Last 7 days</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      @for (tx of recentTransactions(); track tx.description; let last = $last) {
        <div class="tx-row">
          <div class="tx-info">
            <span class="tx-desc">{{ tx.description }}</span>
            <span class="tx-meta"
              >{{ tx.date | date: 'MMM d' }} <mat-chip>{{ tx.category }}</mat-chip></span
            >
          </div>
          <span
            class="tx-amount"
            [class.credit]="tx.type === 'credit'"
            [class.debit]="tx.type === 'debit'"
          >
            {{ tx.amount | currency }}
          </span>
        </div>
        @if (!last) {
          <mat-divider />
        }
      }
    </mat-card-content>
  </mat-card>

  <mat-card class="loan-cta-card">
    <mat-card-header>
      <mat-icon mat-card-avatar>request_quote</mat-icon>
      <mat-card-title>Apply for a Loan</mat-card-title>
      <mat-card-subtitle>Quick application in 4 easy steps</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>Get a personal loan with competitive rates. Complete your application online in minutes.</p>
      <a mat-flat-button color="primary" routerLink="../loans/apply">Start Application</a>
    </mat-card-content>
  </mat-card>
</div>
